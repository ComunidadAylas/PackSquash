[package]
name = "packsquash"
description = "Minecraft resource and data pack optimizer"
version.workspace = true
authors.workspace = true
repository.workspace = true
license.workspace = true
publish.workspace = true
edition.workspace = true
# Hack to make (DEP_PACKSQUASH_)OPTIONS_FILE_JSON_SCHEMA environment variable be available
# to downstream build scripts. See:
# https://github.com/rust-lang/cargo/issues/3544
links = "packsquash"

[dependencies]
packsquash_options.workspace = true
packsquash_util.workspace = true

enumset.workspace = true
enum-map = "2.5.0"
strum.workspace = true
itertools = "0.10.5"
thiserror = "1.0.40"
paste = "1.0.12"

globset.workspace = true
patricia_tree = "0.6.0"
quick_cache = { version = "0.3.0", default-features = false, features = ["ahash"] }
ahash.workspace = true
tinyvec = { version = "1.6.0", features = ["alloc", "rustc_1_55", "serde"] }
compact_str = { version = "0.7.0", features = ["serde"] }

rayon = "1.7.0"
once_cell = "1.17.2"

log = { workspace = true, features = ["kv_unstable"] }

walkdir = "2.3.3"
memmap2 = "0.6.2"
path-clean = "1.0.1"

serde.workspace = true
serde_json.workspace = true
ijson = "0.1.3"

json_comments = "0.2.1"

tempfile = "3.5.0"
crc32fast = "1.3.2"
zopfli = { version = "0.7.4", default-features = false, features = ["std"] }

camino.workspace = true
const-random = "0.1.15"
aes = "0.8.2"
fpe = "0.6.1"
uuid = "1.3.3"
entropy = "0.4.1"
rand_xoshiro = "0.6.0"
onig = { version = "6.4.0", default-features = false }
ref-cast = "1.0.16"

[target.'cfg(windows)'.dependencies]
winreg = "0.50.0"
wmi = { version = "0.13.0", default-features = false, features = ["time"] }

[target.'cfg(target_os = "macos")'.dependencies]
core-foundation = "0.9.3"
mach2 = "0.4.1"

[build-dependencies]
packsquash_options.workspace = true

git2 = { version = "0.17.2", default-features = false }
time = { version = "0.3.21", default-features = false, features = ["std"] }

serde_json.workspace = true
schemars.workspace = true

[dev-dependencies]
pretty_assertions = "1.3.0"

[features]
# Support all kinds of files added by modifications by default
default = ["mod-support"]

# This feature will include support for all the mods that PackSquash will ever support
mod-support = ["optifine-support", "mtr3-support"]

# TODO implement
optifine-support = []
mtr3-support = []
