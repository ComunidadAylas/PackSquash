[workspace]
members = [
    "packages/packsquash", "packages/packsquash_cli", "packages/packsquash_gui/src-tauri",
    "packages/packsquash_options", "packages/packsquash_util"
]

[patch.crates-io]
# Use a newer commit of oxipng that has a PR that adds a more performant raw image API merged.
# Related PR: https://github.com/shssoichiro/oxipng/pull/482
oxipng = { git = "https://github.com/shssoichiro/oxipng", rev = "96122fa4" }

# Use our fork of glsl-lang that allows it to parse #moj_import directives
glsl-lang = { git = "https://github.com/ComunidadAylas/glsl-lang" }
glsl-lang-lexer = { git = "https://github.com/ComunidadAylas/glsl-lang" }
glsl-lang-pp = { git = "https://github.com/ComunidadAylas/glsl-lang" }
glsl-lang-types = { git = "https://github.com/ComunidadAylas/glsl-lang" }

# Use a patch of the indenter crate with a fix for line number computation for formatters.
# See: https://github.com/yaahc/indenter/pull/18
indenter = { git = "https://github.com/ComunidadAylas/indenter" }

[profile.release]
opt-level = 3
lto = "fat"
codegen-units = 1
strip = "symbols"

[profile.bench]
inherits = "release"
debug = true
strip = "none"
