[workspace]
members = [
    "packages/packsquash", "packages/packsquash_cli", "packages/packsquash_gui/src-tauri",
    "packages/packsquash_options", "packages/packsquash_util"
]

[workspace.package]
version = "0.4.0"
authors = ["Alejandro \"AlexTMjugador\" Gonz√°lez"]
repository = "https://github.com/ComunidadAylas/PackSquash"
license = "AGPL-3.0-or-later"
publish = false
edition = "2021"

[workspace.dependencies]
packsquash = { path = "packages/packsquash", version = "0.4.0" }
packsquash_options = { path = "packages/packsquash_options", version = "0.4.0" }
packsquash_util = { path = "packages/packsquash_util", version = "0.4.0" }

serde = { version = "1.0.163", features = ["derive", "rc"] }
serde_json = "1.0.96"
toml = { version = "0.7.4", default-features = false }
schemars = { version = "0.8.12", default-features = false }

log = "0.4.18"

ahash = "0.8.3"
enumset = "1.1.2"
globset = { version = "0.4.10", default-features = false }
strum = { version = "0.24.1", features = ["derive"] }
camino = "1.1.4"

[patch.crates-io]
# Use a patch of the indenter crate with a fix for line number computation for formatters.
# See: https://github.com/yaahc/indenter/pull/18
indenter = { git = "https://github.com/ComunidadAylas/indenter" }

# Use a tauri commit that unpins dependencies, which is necessary for proper dependency
# handling, especially in combination with the time crate.
# Drop this patch when https://github.com/tauri-apps/tauri/pull/6966 gets released,
# probably for Tauri 1.3.1
tauri = { git = "https://github.com/tauri-apps/tauri", rev = "2b487c94" }
tauri-build = { git = "https://github.com/tauri-apps/tauri", rev = "2b487c94" }

[profile.release]
lto = "fat"
codegen-units = 1
panic = "abort"
strip = "symbols"

[profile.bench]
inherits = "release"
debug = true
strip = "none"
